
<!DOCTYPE html>
<html land="en">
<head>
<meta charset="UTF-8">
<title>Live onlineukrfootball1-live</title>

<link rel="stylesheet" href="css/skin.css">

<style>
        body {
            font-family: "myriad pro", tahoma, verdana, arial, sans-serif;
            font-size: 14px;
            margin: 0;
            padding: 0;
        }
        #content {
            margin: 0px auto;
            max-width: 982px;
        }
    </style>

<script src="js/jquery/1.12.4/jquery-1.12.4.min.js"></script>

<script src="js/flowplayer/7.0.4/flowplayer.min.js"></script>

<script src="js/flowplayer/hlsjs/flowplayer.hlsjs.min.js"></script>
</head>
<body>
<div id="player-container">
<div id="videoplayerdiv">
<div id="content">
<div id="player" class="flowplayer fp-mute is-spash" style="background-color:#777; background-image:url('https://livesports24.watch/onlineukrfootball1-live.png'); background-size: 100% 100%;">
</div>
</div>
</div>
</div>
<script>
    flowplayer.conf = {
        fullscreen: true,
        native_fullscreen: true,
        share: false,
        splash: true,
        live: true
    };
    flowplayer(function (api, root) {
        var fsbutton = root.querySelector(".fp-fullscreen");
        api.on("load", function() {
            $('.flowplayer a[href="https://flowplayer.org/hello"]').remove();
        });
        api.on("ready", function () {
            $(".fp-controls .fp-elapsed").remove();
            $(".fp-duration").insertBefore($(".fp-timeline.fp-bar"));
            $(".fp-duration").click(function(e) {e.stopPropagation();});
            $('.fp-remaining').remove();
            root.querySelector(".fp-controls").appendChild(fsbutton);
        });
        api.on("resume", function() {
            clearInterval(splashInterval);
            state = "watch";
        });
        api.on("pause", function(e, api) {
            state = "pause";
        });
        api.on("error", function (e, api, err) {
            state = "error";
            if (err.code === 4) { // Video file not found
                clearInterval(watchInterval)
                // reset state
                api.error = api.loading = false;
                $(".fp-message", root).css({opacity: 0});
                $(root).removeClass("is-error");

                // load safe replacement video sources
                $.get("https://api.livesports24.online/gethost", function (host) {
                    api.load({
                        sources: [
                            {type: "application/x-mpegurl", src: "https://" + host + "/onlineukrfootball1-live.m3u8"}
                        ]
                    }, function (e, api) {
                        // optional: notify user
                        $(".fp-message:first", root).remove();
                        api.message("Замена видеопотока: успех!");
                        // change timeline color to alert user
                        $(root).addClass("replacement");
                        window.alertTimeout = setTimeout(function () {
                            $(".fp-message:first", root).remove();
                        }, 3000);
                    });
                    if(watchInterval !== null) {
                        clearInterval(watchInterval);
                    }
                    watchInterval = setInterval(function() {
                        $.get("https://livesports24.watch/watch", function (reply) {
                            if(reply !== "OK") {
                                console.log(reply)
                            }
                        });
                    }, 5000);
                });
            }
        }).on("unload", function () {
            // remove optional custom message to avoid duplication on reload
            clearTimeout(window.alertTimeout);
            $(".fp-message:first", root).remove();
        });
    });

    var splashInterval = null, watchInterval = null, state = "open", counter = 1;

    $("document").ready(function () {
        $.get("https://api.livesports24.online/gethost", function (host) {
            flowplayer("#player", {
                clip: {
                    sources: [
                        {
                            type: "application/x-mpegurl",
                            src: "https://" + host + "/onlineukrfootball1-live.m3u8"
                        }
                    ],
                }
            });
            if(watchInterval !== null) {
                clearInterval(watchInterval);
            }
            watchInterval = setInterval(function() {
                $.get("https://api.livesports24.online/watch?state=" + state, function (reply) {
                    if(reply !== "OK") {
                        console.log(reply)
                    }
                });
            }, 5000);
        });

        splashInterval = setInterval(function() {
            $("#player").removeAttr("style");
            $("#player").attr("style", "background-color:#777; background-image: url('https://livesports24.watch/onlineukrfootball1-live.png?_=" + counter++  + "'); background-size: 100% 100%;");
        }, 30000);
    });
</script>
</body>
</html>
